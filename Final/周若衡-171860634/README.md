# 葫芦娃大作业 2019_fall

# 待续
## README因为时间原因没能完整完成
## mvn打包jar一直报错，使用IDEA build artifacts

# 先提交源码 请求迟交README 尽量赶在1月7日前完善

## 1.开发环境
    jdk=1.8.0
    mvn=3.6.3
## 2.游戏玩法
    在初始状态下可以在菜单栏中为葫芦娃和妖怪选择阵型。提供8种阵型选择

    左侧为战斗场景，右侧文字框展现结果(包括角色移动和攻击)同时给出操作提示

    按ENTER键后，开始游戏
    爷爷有一定概率召唤出穿山甲，穿山甲有一定概率发射火球。同时其他角色都可以在九宫格范围内对敌方展开攻击。如果我方阵营的爷爷被干掉，则弹出GameOver，若敌方阵营全员被干掉，则也弹出GameOver，游戏结束。整个战斗过程中，随着血量的减少，自身透明度会发生改变。当角色死亡后，会变成一块墓碑或十字架。
    角色先判断能否对周围九宫格内进行攻击(包括死亡角色的墓碑)，若不能，则随机生成 一个方向向量(上下左右)进行行走(行走可能失败)。在游戏结束后，再按空格键，可以弹出一个文件选择框，将数据保存至文件中，便于后续复盘使用。

    通过按R键进行新一回合游戏

    按F键同样弹出选择框，选择记录文件，随后自动开始回放。(record文件夹已保存一份记录)

    游戏结束后按ENTER进行保存记录

## 3.包结构
### 3.1 administer
    相应类名对相应事物进行如下管理
    对阵营、线程、记录、阵型初始化、子弹进行管理工作;
### 3.2 creature
    对前几次代码进行修改
    大体上还是分为goodCreature和badCreature

    新添基类being 为creature和bullet的父类
    creatureFactory为工厂化生产creature
### 3.3 formation
    对前几次代码的扩充
    将不同阵型分离实现
    工厂化生产formation对象
### 3.4 behave
    实现不同行为的方法
    例如 移动行为   攻击行为等等
### 3.5 gui
    设计GUI框架 实现游戏空间的设计
### 3.6 playRecord
    游戏文件的读取和保存
### 3.7 util
    辅助包，工具

## 4.设计理念
### 4.1 封装
### 4.2 继承
### 4.3 多态

# 5.基本要求的解决方案
## 5.1 多线程
    要求每一个生物体实现为一个线程，并通过同步机制实现共享变量的互斥访问。
## 5.2 图新化
    使用了javaFx中两个组件，Canvas用于图形的绘制而TextArea用于文本信息输出。当每次内部出现事件(移动、攻击)，都会通知Canvas进行重绘。每次重绘都是先刷背景，然后扫描board，每个生物挨个绘制。
## 5.3 集合类型机制

    集合类型中我主要使用了ArrayList作为数组使用(动态增长)。BadCreatureAdminister会管理一个小妖怪数组，而GoodCreatureAdminister管理葫芦娃数组。而回放的每一条记录也使用此进行存储。
## 5.4 泛型机制
    例如利用泛型显示指出Cell与Being的关系。
    public class Cell<T extends Being>{
        private T being;
    }

## 5.5 远距离攻击的添加

    穿山甲在run方法中每隔一段时间生成一个Bullet对象，然后使用同步机制，将其放入BulletAdminister中的数组中进行保管。而BulletAdminister也实现run方法，每次轮到它的任务执行时，就对当前其保管的所有子弹进行移动。

# 6. 设计原则
## 单一职责原则

## 开放封闭原则
    Formation类中有一个putFormationOnBoard方法。当后期我们增加更多的阵型时，这个方法不需要改变，我们只需要增加子类即可，体现了对拓展开放、对修改封闭。
## 里氏替换原则
    Formation类
## 工厂模式
    FormationFactory和CreatureFatory
